<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:AgntsChatUI.ViewModels"
             xmlns:ai="using:AgntsChatUI.AI"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="600"
             x:Class="AgntsChatUI.Views.Components.AgentListComponent"
             x:DataType="vm:AgentManagementViewModel">

	<Border Background="#f8f9fa" BorderBrush="#e8eaed" BorderThickness="0,0,1,0">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!-- Simplified Header -->
			<Border Grid.Row="0" Padding="12" BorderBrush="#e8eaed" BorderThickness="0,0,0,1">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>
					
					<StackPanel Grid.Column="0" Spacing="4">
						<TextBlock Text="Agents" Classes="TitleSmall" FontWeight="Medium" Foreground="#202124"/>
						<TextBlock Classes="Caption">
							<Run Text="{Binding Agents.Count}"/>
							<Run Text=" agents"/>
						</TextBlock>
					</StackPanel>
					
					<!-- Quick Add Button -->
					<Button Grid.Column="1"
					        Command="{Binding AddAgentCommand}"
					        Classes="PrimaryButton"
					        ToolTip.Tip="Add New Agent">
						<TextBlock Text="+" Classes="BodyMedium"/>
					</Button>
				</Grid>
			</Border>

			<!-- Simplified Agent List -->
			<Border Grid.Row="1" Padding="8" Margin="8">
				<ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Disabled"
							ScrollViewer.VerticalScrollBarVisibility="Auto">
					<StackPanel Spacing="8">
						<ItemsControl ItemsSource="{Binding Agents}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<Border Classes="InteractiveCard" 
											Padding="12" 
											Margin="0,0,0,8">
										<Grid>
											<Grid.ColumnDefinitions>
												<ColumnDefinition Width="*"/>
												<ColumnDefinition Width="Auto"/>
												<ColumnDefinition Width="Auto"/>
											</Grid.ColumnDefinitions>
											
											<!-- Agent Info -->
											<StackPanel Grid.Column="0" Spacing="4">
												<TextBlock Classes="BodyMedium" 
														Text="{Binding Name}"
														FontWeight="Medium"/>
												<TextBlock Classes="Caption" 
														Text="{Binding Description}" 
														TextWrapping="Wrap" 
														MaxLines="1" 
														TextTrimming="CharacterEllipsis"/>
											</StackPanel>
											
											<!-- Edit Button -->
											<Button Grid.Column="1" 
													Classes="SecondaryButton" 
													Command="{Binding $parent[UserControl].DataContext.EditAgentCommand}" 
													CommandParameter="{Binding}" 
													ToolTip.Tip="Edit Agent"
													Width="24" Height="24"
													Margin="4,0,2,0">
												<TextBlock Text="E" Classes="Caption" HorizontalAlignment="Center" VerticalAlignment="Center"/>
											</Button>
											
											<!-- Delete Button -->
											<Button Grid.Column="2" 
													Classes="SecondaryButton" 
													Command="{Binding $parent[UserControl].DataContext.DeleteAgentCommand}" 
													CommandParameter="{Binding}" 
													ToolTip.Tip="Delete Agent"
													Width="24" Height="24"
													Margin="2,0,0,0">
												<TextBlock Text="D" Classes="Caption" HorizontalAlignment="Center" VerticalAlignment="Center"/>
											</Button>
										</Grid>
									</Border>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>

						<!-- Loading State -->
						<Border IsVisible="{Binding IsLoading}"
								Classes="StandardCard" 
								Padding="16">
							<StackPanel HorizontalAlignment="Center" Spacing="8">
								<TextBlock Text="Loading..." Classes="BodyMedium" HorizontalAlignment="Center"/>
							</StackPanel>
						</Border>

						<!-- Empty State -->
						<Border IsVisible="{Binding !Agents.Count}"
								Classes="StandardCard" 
								Padding="16">
							<StackPanel HorizontalAlignment="Center" Spacing="8">
								<TextBlock Classes="BodyMedium" Text="No agents" HorizontalAlignment="Center"/>
								<Button Classes="SecondaryButton"
										Command="{Binding AddAgentCommand}">
									<TextBlock Text="Add Agent" Classes="Caption"/>
								</Button>
							</StackPanel>
						</Border>
					</StackPanel>
				</ScrollViewer>
			</Border>
		</Grid>
	</Border>
</UserControl>